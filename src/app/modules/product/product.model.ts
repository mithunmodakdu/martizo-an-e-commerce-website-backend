import { model, Schema } from "mongoose";
import { IProduct } from "./product.interface";
import { VariantSchema } from "../variant/variant.model";

const ProductSchema = new Schema<IProduct>(
  {
    // main details
    title: {type: String, required: true},
    slug: {type: String, required: true, unique: true},
    description: {type: String},

    // categorization
    category: {type: Schema.Types.ObjectId, ref: "Category", required: true},
    subCategory: {type: Schema.Types.ObjectId, ref: "Category"},
    brand: {type: Schema.Types.ObjectId, ref: "Brand"},

    // price
    price: {type: Number, required: true},
    salePrice: Number,
    discountPercentage: Number,

    // stock + variants
    stock: {type: Number, required: true},
    variants: {type: [VariantSchema], default: []},

    // media
    thumbnail: {type: String, required: true},
    images: {type: [String]},

    // labels for Shop menu sections
    isNewArrival: {type: Boolean, default: false},
    isBestSeller: {type: Boolean, default: false},
    isFlashSale: {type: Boolean, default: false},
    isMartizoExclusive: {type: Boolean, default: false},
    isTrending: {type: Boolean, default: false},

    // offers
    offers: {type: [Schema.Types.ObjectId], ref: "Offer", default: []},

    // rating system
    rating: Number,
    ratingCount: Number,

    // others
    sku: String

  },
  {
    timestamps: true
  }
);

export const Product = model("Product", ProductSchema);
































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































